## encoding: utf-8
<%inherit file="./templates/master.html"/>\
<%namespace file="./templates/common.html" import="render"/>\
<%! from model import Story %>
\
<%def name="title()">Latest Articles</%def>\
<%def name="cls()">nav-default</%def>\
\
<h1>${title()}</h1>

<dl class="tsa">
% for story in Story.objects(visible=True)[(page-1)*pp:page*pp]:
    <dt><a href="${story.url}">${story.title}</a></dt>
%   if story.feed:
    <dd class="meta">
        From <a href="${story.feed.site}" title="">${story.feed.title}</a>
        ${render(story.date, prefix="on ")}.</dd>
%   endif
    <dd class="desc">${story.description|n}</dd>
% endfor
</dl>

<div class="byline tr" style="margin-top: 10px;">
    <h4 class="fl">Continue Reading</h4>
    <menu class="inline">\
% if page > 1:
<li><a href="/?pp=${pp}&amp;p=${page-1}">Newer Items</a></li>\
% endif
% if (len(Story.objects(visible=True)) - pp * (page - 1)) > pp:
<li><a href="/?pp=${pp}&amp;p=${page+1}">Older Items</a></li>\
% endif
</menu>
</div>